%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% repost enviroment                         %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheoremstyle{myrepost}{}{}{}{}{\bfseries}{.\\}{1zw}{\thmname{\nameCref{\ImitationRef}}\hspace{0.2em}\getrefnumber{\ImitationRef}\thmnote{\hspace{0.5em}(#3)}}
\theoremstyle{myrepost}

\newcommand{\ImitationRef}{initial}

\newtheorem*{_repost}{repost}
\NewDocumentEnvironment{repost}{r() o}{
  \renewcommand{\ImitationRef}{#1}
  \begin{_repost}[#2]
}{
  \end{_repost}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% normal enviroments                           %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheoremstyle{mytheorem}{}{}{}{}{\bfseries}{.\\}{1zw}{\thmname{#1}\thmnumber{\hspace{0.2em}#2}\thmnote{\hspace{0.5em}(#3)}}
\theoremstyle{mytheorem}

\NewDocumentCommand\environment{m m}{
  \newtheorem{_#1}[BaseCounter]{#2}
  \newtheorem*{#1*}{#2}
  \NewDocumentEnvironment{#1}{o}{
    \IfValueTF{##1}{\begin{_#1}[##1]}{\begin{_#1}}
  }{
    \end{_#1}
  }
}

\ifthenelse{\boolean{IsEnglish}}{
  \environment{definition}{Definition}
  \environment{theorem}{Theorem}
  \environment{proposition}{Proposition}
  \environment{lemma}{Lemma}
  \environment{corollary}{Corollary}
  \environment{problem}{Problem}

  \newtheoremstyle{myproofen}{}{}{}{}{\bfseries}{.}{0.5zw}{\thmname{#1}\thmnumber{\hspace{0.2em}of\hspace{0.2em}\namecref{#3}\hspace{0.2em}\ref{#3}}}
  \theoremstyle{myproofen}
  \newtheorem{_proof}{Proof}
  \newtheorem*{_proof*}{Proof}

  \crefname{_definition}{definition}{definitions}
  \crefname{_theorem}{theorem}{theorems}
  \crefname{_proposition}{proposition}{propositions}
  \crefname{_lemma}{lemma}{lemmas}
  \crefname{_corollary}{corollary}{corollaries}
}{
  \environment{definition}{定義}
  \environment{theorem}{定理}
  \environment{proposition}{命題}
  \environment{lemma}{補題}
  \environment{corollary}{系}
  \environment{problem}{問題}

  \newtheoremstyle{myproofja}{}{}{}{}{\bfseries}{.}{0.5zw}{\thmnumber{\namecref{#3}\hspace{0.2em}\ref{#3}\hspace{0.2em}の}\thmname{#1}}
  \theoremstyle{myproofja}
  \newtheorem{_proof}{証明}
  \newtheorem*{_proof*}{証明}

  \crefname{equation}{式}{式}
}

\RenewDocumentEnvironment{proof}{r()}{\begin{_proof}[#1]}{\qed\end{_proof}}
\NewDocumentEnvironment{proof*}{}{\begin{_proof*}}{\qed\end{_proof*}}
